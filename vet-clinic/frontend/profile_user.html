<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetLove - Профиль</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="login-card">
            <div class="header">
                <a href="home_user.html"><button class="back-button"><span><</span></button></a>
                <img src="img/logo.jpg" alt="" class="logo"></img>
            </div>
            <div class="content">
                <h2>Мой профиль</h2>
                
                <form id="register">
                    <label for="name">Ваше имя:</label>
                    <input class="input_register" type="text" id="name" placeholder="Ваше имя:" required>
                    
                    <label for="email">Ваш E-mail:</label>
                    <input class="input_register" type="email" id="email" placeholder="Ваш E-mail:" required>
                    
                    <label for="phone">Номер телефона:</label>
                    <input class="input_register" 
                        type="tel" 
                        id="phone" 
                        name="phone"
                        placeholder="+7 (XXX) XXX-XX-XX" 
                        pattern="\+7\s?[\(]{0,1}[0-9]{3}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}"
                        required
                    >
                    <button type="submit" class="First-button">Сохранить</button>
                </form>
            </div>
        </div>
    </div>
    <script>
        // Фейковые данные
        const fakeUserData = {
            name: "Дима",
            email: "zwampir915@gmail.com",
            phone: "+7 (996) 590-28-62"
        };

        // Загрузка данных при открытии страницы
        function loadUserData() {
            const savedData = JSON.parse(localStorage.getItem('userProfile'));
            const userData = savedData || fakeUserData;
            
            document.getElementById('name').value = userData.name;
            document.getElementById('email').value = userData.email;
            document.getElementById('phone').value = userData.phone;
        }

        // Инициализация при загрузке страницы
        window.addEventListener('DOMContentLoaded', () => {
            loadUserData();
            
            // Маска для телефона
            document.getElementById('phone').addEventListener('input', function(e) {
                let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
                e.target.value = !x[2] ? '+7' : '+7 (' + x[2] + (x[3] ? ') ' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
            });
        });

        // Обработчик отправки формы
        document.getElementById('register').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Валидация
            const fields = [
                { element: document.getElementById('name'), name: 'ФИО' },
                { element: document.getElementById('email'), name: 'Email' },
                { element: document.getElementById('phone'), name: 'Телефон' }
            ];

            let isValid = true;
            document.querySelectorAll('.error').forEach(el => el.classList.remove('error'));
            document.querySelectorAll('.error-message').forEach(el => el.remove());

            fields.forEach(field => {
                if (!field.element.value.trim()) {
                    markAsError(field.element, `Поле "${field.name}" обязательно`);
                    isValid = false;
                }
                
                if (field.element.id === 'phone') {
                    const phoneValue = field.element.value.replace(/\D/g, '');
                    if (phoneValue.length !== 11) {
                        markAsError(field.element, 'Телефон должен содержать 11 цифр');
                        isValid = false;
                    }
                }
            });

            if (!isValid) return;

            // Сохранение в localStorage
            const userData = {
                name: document.getElementById('name').value.trim(),
                email: document.getElementById('email').value.trim(),
                phone: document.getElementById('phone').value
            };
            
            localStorage.setItem('userProfile', JSON.stringify(userData));
            alert('Данные успешно сохранены!');
        });

        function markAsError(element, message) {
            element.classList.add('error');
            const errorMsg = document.createElement('div');
            errorMsg.className = 'error-message';
            errorMsg.textContent = message;
            errorMsg.style.color = 'red';
            errorMsg.style.fontSize = '0.8em';
            errorMsg.style.marginTop = '0.3em';
            element.parentNode.insertBefore(errorMsg, element.nextSibling);
        }
    </script>
</body>
</html>